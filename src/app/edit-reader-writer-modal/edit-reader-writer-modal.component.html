<ion-modal [isOpen]="isVisible" trigger="open-modal" (willDismiss)="closeModal()">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-buttons slot="start">
          <ion-button (click)="closeModal()">{{ "CANCEL" | translate }}</ion-button>
        </ion-buttons>
        <ion-title>{{ "MANAGE_SHARE_TITLE" | translate }}</ion-title>
      </ion-toolbar>
    </ion-header>

    <ion-content>
      <ion-list class="scrollable-list">
        @for (user of users; track user.email) {
          <ion-card>
            <ion-card-content>
              <ion-label class="user-email">{{ user.email }}</ion-label>

              <ion-radio-group [value]="user.role" (ionChange)="updateRole(user)">
                <ion-item (click)="updateRole(user, 'reader')">
                  <ion-label>{{ "READER" | translate }}</ion-label>
                  <ion-radio slot="end" value="reader"></ion-radio>
                </ion-item>
                <ion-item (click)="updateRole(user, 'writer')">
                  <ion-label>{{ "WRITER" | translate }}</ion-label>
                  <ion-radio slot="end" value="writer"></ion-radio>
                </ion-item>
              </ion-radio-group>

              <ion-button expand="block" color="danger" fill="outline" (click)="removeUser(user)">
                <ion-icon name="trash-outline" slot="start"></ion-icon>
                {{ "DELETE" | translate }}
              </ion-button>
            </ion-card-content>
          </ion-card>
        }
      </ion-list>
    </ion-content>
  </ng-template>
</ion-modal>
